<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="color-scheme" content="light">  
<title>The Sassenach Studies — Media Library</title>
<meta name="description" content="Audio & video library for The Sassenach Studies — Bloodlines & Timelines (Season 1)." />
<link rel="preconnect" href="https://archive.org" />
<style>
  /* =============================
     The Sassenach Studies — parchment & ink skin
     Single‑file GitHub Pages site
     ============================= */
  :root{
    /* Watercolor/ink palette to match your artwork */
    --ink: #2a2a2a;
    --ink-2: #3a3a3a;
    --parchment: #f3ecd8;
    --parchment-2:#efe6cf;
    --stone:#6c7a86;
    --fern:#6c8a6b;
    --heather:#8b6f9d;
    --thread:#c64a3a; /* red thread */
    --sky:#4a6b8a;    /* spiral blue */
    --accent:#274C56; /* deep teal */
  }
  html,body{height:100%}
  body{
    margin:0; font:16px/1.5 "Georgia", ui-serif, Cambria, "Times New Roman", serif; color:var(--ink);
    background: radial-gradient(1200px 800px at 10% 0%, rgba(255,255,255,.8), rgba(255,255,255,0)) , var(--parchment);
  }
  .wrap{max-width:clamp(960px, 90vw, 1320px); margin:0 auto; padding:28px 24px 72px}
  header{display:grid; grid-template-columns:1fr auto; gap:16px; align-items:center; margin-bottom:22px}
  .brand{display:flex; gap:14px; align-items:center}
  .brand .logo{width:54px; height:54px; border-radius:12px; background: conic-gradient(from 0deg, var(--sky), var(--parchment) 35%, var(--thread) 36%, var(--thread) 64%, var(--parchment) 65%, var(--sky)); box-shadow:0 2px 0 rgba(0,0,0,.05) inset, 0 2px 6px rgba(0,0,0,.15)}
  .brand h1{font-size: clamp(20px, 3vw, 30px); margin:0}
  .brand h1 small{display:block; font-size:.6em; color:var(--stone); letter-spacing:.5px}
  .actions a{display:inline-block; padding:8px 12px; border:2px solid var(--ink); border-radius:10px; text-decoration:none; color:var(--ink); background:linear-gradient(var(--parchment-2), var(--parchment)); box-shadow:0 2px 0 rgba(0,0,0,.08)}
  .actions a:hover{transform:translateY(-1px)}

  .hero{position:relative; border-radius:18px; overflow:hidden; margin:10px 0 22px; border:2px solid rgba(0,0,0,.1); background:var(--parchment-2)}
  .hero img{display:block; width:100%; height:auto}
  .hero .ribbon{position:absolute; left:16px; bottom:16px; background:rgba(255,255,255,.85); border:2px solid rgba(0,0,0,.15); padding:10px 14px; border-radius:10px}
  .hero .ribbon h2{margin:0; font-size:clamp(18px, 2.2vw, 26px)}
  .hero .ribbon p{margin:4px 0 0; font-size:.95rem; color:var(--stone)}

  .filters{display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:18px 0 10px}
  .filters .seg{display:flex; gap:6px; padding:6px; background:var(--parchment-2); border:2px solid rgba(0,0,0,.08); border-radius:12px}
  .filters .seg button{border:0; padding:8px 12px; border-radius:8px; background:transparent; cursor:pointer; font-weight:600}
  .filters .seg button[aria-pressed="true"]{background:var(--ink); color:#fff}
  .filters input[type="search"]{flex:1 1 240px; padding:10px 12px; border-radius:10px; border:2px solid rgba(0,0,0,.12); background:#fff}

  .grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(340px, 1fr)); gap:22px; margin-top:12px}
  .card{background:linear-gradient(#fff, #faf7ee); border:2px solid rgba(0,0,0,.18); border-radius:16px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.10); transition:transform .12s ease, box-shadow .12s ease}
  .thumb{aspect-ratio:16/9; background:#ddd; position:relative}
  .thumb img{width:100%; height:100%; object-fit:cover; display:block}
  .badge{position:absolute; top:10px; left:10px; background:#fff; color:var(--ink); border:2px solid rgba(0,0,0,.12); padding:3px 8px; border-radius:999px; font-size:.8rem; font-weight:700}
  .meta{padding:12px 14px}
  .title{margin:0 0 4px; font-size:1.05rem}
  .small{color:var(--stone); font-size:.92rem}
  .meta .tags{margin-top:8px; display:flex; gap:8px; flex-wrap:wrap}
  .tag{font-size:.8rem; background:rgba(198,74,58,.08); color:var(--thread); border:1px solid rgba(198,74,58,.25); padding:2px 8px; border-radius:999px}
  .row{display:flex; gap:10px; align-items:center; margin-top:10px}
  .btn{border:2px solid var(--ink); background:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700}
  .btn.play{background:var(--ink); color:#fff}
  .btn.alt{border-color:var(--accent); color:var(--accent)}

  dialog#player{width:min(900px, 96vw); border:0; padding:0; border-radius:18px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.35)}
  .player-head{padding:14px 16px; background:var(--parchment-2); border-bottom:2px solid rgba(0,0,0,.1); display:flex; gap:10px; align-items:center; justify-content:space-between}
  .player-body{padding:16px; background:#fff}
  .player-title{margin:0; font-size:1.1rem}
  .close{border:2px solid rgba(0,0,0,.25); background:#fff; border-radius:8px; padding:6px 10px; cursor:pointer}
  .media{width:100%; max-height:60vh}
  footer{margin-top:40px; color:var(--stone); font-size:.92rem}
  footer a{color:var(--ink)}

  /* Tiny nod to Jamie & Claire — silhouette cameo corners */
  .hero:before,.hero:after{content:""; position:absolute; width:60px; height:60px; top:14px; border-radius:50%; opacity:.07; background:radial-gradient(circle at 60% 40%, var(--ink) 0 35%, transparent 37%), conic-gradient(from 0deg, transparent 0 40%, var(--ink) 0 41%, transparent 43% 100%)}
  .hero:before{left:14px}
  .hero:after{right:14px; transform:scaleX(-1)}

  @media (prefers-color-scheme: dark){
    body{color:#f6f2e8; background:#111}
    .actions a{border-color:#eee; color:#111; background:#f6f2e8}
    .card{background:linear-gradient(#1a1a1a,#121212); border-color:rgba(255,255,255,.12)}
    .meta .small{color:#c9c1af}
    .btn{background:#111; color:#f6f2e8; border-color:#f6f2e8}
    .btn.play{background:#f6f2e8; color:#111}
    .hero .ribbon{background:rgba(17,17,17,.85); color:#f6f2e8}
    dialog#player{background:#111}
    .player-body{background:#000}
  }
  /* ======= Sassenach 3×6 card grid (tight) ======= */
.ss-wrap{ margin:1.25rem 0; }
.ss-table{ display:grid; grid-template-columns: 1fr 1fr 1.15fr; gap:14px; }
.ss-head, .ss-row{ display:contents; }  /* allow full-row cards without extra wrappers */

/* Column headers */
.ss-colhead{
  font:600 .9rem/1.2 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--ink);
  background:var(--parchment-2);
  border:1px solid rgba(0,0,0,.1);
  border-radius:10px;
  padding:.6rem .7rem;
}

/* Cells = cards with equal height */
.ss-cell{
  background:#fff;
  border:1px solid rgba(0,0,0,.14);
  border-radius:12px;
  display:flex; flex-direction:column;
  padding:.75rem .85rem;
  min-height:160px;  /* uniform rows; tweak if you like */
}

/* Card parts */
.ss-top{ display:flex; align-items:center; gap:.5rem; margin-bottom:.5rem; }
.ss-ep{ font:700 .75rem/1 system-ui; color:var(--fern); text-transform:uppercase; letter-spacing:.02em; }
.ss-title{ font:700 1rem/1.15 ui-serif,Georgia,serif; margin:0; color:var(--ink); }
.ss-thumb{
  width:100%; height:140px; object-fit:cover; border-radius:10px;
  border:1px solid rgba(0,0,0,.12); display:block; margin:.35rem 0 .6rem;
}
.ss-meta{ margin-top:auto; } /* push links to bottom */
.ss-links{ display:flex; gap:.55rem; flex-wrap:wrap; font-size:.92rem; color:var(--stone); }
.ss-links a{ color:inherit; text-decoration:underline; text-underline-offset:2px; }
.ss-links a:hover{ text-decoration:none; }

.ss-quote{ margin:.25rem 0 .4rem; padding-left:.7rem; border-left:3px solid rgba(0,0,0,.12); color:var(--stone); font-style:italic; }
.ss-log{ color:var(--ink-2); margin:.1rem 0 .4rem; }

/* Controls */
.ss-btn{
  appearance:none; border:1px solid rgba(0,0,0,.2); background:#fff; color:var(--ink);
  font:700 .92rem/1 system-ui; padding:.5rem .7rem; border-radius:10px; cursor:pointer;
}
.ss-btn[aria-pressed="true"]{ background:var(--ink); color:#fff; }
.ss-chip{
  display:inline-flex; align-items:center; gap:.45rem;
  border:1px solid rgba(0,0,0,.18); padding:.42rem .6rem; border-radius:10px; text-decoration:none; color:var(--ink);
}
.ss-chip .dot{ width:1.2rem; height:1.2rem; display:grid; place-items:center; border:1px solid rgba(0,0,0,.18); border-radius:50%; }

/* Dark override kept light */
@media (prefers-color-scheme: dark){
  .ss-colhead, .ss-cell, .ss-btn, .ss-chip{ background:#fff; color:var(--ink); border-color:rgba(0,0,0,.18); }
  .ss-quote{ border-left-color:rgba(0,0,0,.18); }
}

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>The Sassenach Studies <small>Where fandoms meet footnotes</small></h1>
      </div>
      <div class="actions">
        <a id="toListed" href="https://listed.to/@SassenachStudies" target="_blank" rel="noopener">↗ To blog</a>
      </div>
    </header>

    <!-- Hero poster for Season 1 -->
    <section class="hero" id="seasonHero" hidden>
      <img id="heroImg" alt="Season poster" />
      <div class="ribbon">
        <h2 id="heroTitle">Season 1 — Bloodlines &amp; Timelines</h2>
        <p id="heroBlurb">A six‑part, Outlander‑themed analytical series on spiral (connection) and red thread (commitment).</p>
      </div>
    </section>

    <section class="filters" aria-label="Filters">
      <div class="seg" role="group" aria-label="Media type">
        <button data-filter="all" aria-pressed="true">All</button>
        <button data-filter="audio" aria-pressed="false">Audio</button>
        <button data-filter="video" aria-pressed="false">Video</button>
      </div>
      <input id="q" type="search" placeholder="Search title, notes, tags…" aria-label="Search" />
    </section>

   <!-- 3×6 grid -->
<div class="ss-wrap">
  <div class="ss-table" id="ss-table" role="table" aria-label="Episodes">
    <!-- headers -->
    <div class="ss-colhead" role="columnheader">Audio</div>
    <div class="ss-colhead" role="columnheader">Video</div>
    <div class="ss-colhead" role="columnheader">Summary</div>
    <!-- rows will be injected -->
  </div>
</div>

<audio id="ss-audio" preload="none" aria-hidden="true"></audio>

<script>
(async function(){
  const CARDS_JSON = '/TheSassenachStudies/cards/cards.json';
  const table  = document.getElementById('ss-table');
  const player = document.getElementById('ss-audio');

  let currentBtn=null, rafId=null, lastSrc='';

  const fmt=t=>{ if(!isFinite(t)||t<0) t=0; const m=Math.floor(t/60), s=Math.floor(t%60); return m+':'+String(s).padStart(2,'0'); };
  const setLabel=(btn,play)=>{
    const cur = isFinite(player.currentTime) ? fmt(player.currentTime) : '0:00';
    const dur = (isFinite(player.duration)&&player.duration>0) ? fmt(player.duration) : '—:—';
    btn.innerHTML = play ? `❚❚ Pause ${cur}/${dur}` : '▶ Play';
    btn.setAttribute('aria-pressed', play?'true':'false');
  };
  const tick=()=>{ if(currentBtn && !player.paused) setLabel(currentBtn,true); rafId=requestAnimationFrame(tick); };
  const start=()=>{ cancelAnimationFrame(rafId); rafId=requestAnimationFrame(tick); };
  const stop =()=>{ cancelAnimationFrame(rafId); };

  document.addEventListener('click', async (e)=>{
    const btn = e.target.closest('.ss-btn');
    if(!btn) return;
    const src = btn.dataset.audio || '';
    if(!src) return;

    if(lastSrc === new URL(src, location.href).href){
      if(player.paused){ try{await player.play();}catch{} currentBtn=btn; setLabel(btn,true); start(); }
      else { player.pause(); setLabel(btn,false); stop(); }
      return;
    }
    player.src = src; lastSrc = player.src;
    try{ await player.play(); }catch{}
    if(currentBtn && currentBtn!==btn) setLabel(currentBtn,false);
    currentBtn = btn; setLabel(btn,true); start();
  });

  ['loadedmetadata','durationchange','timeupdate','play','pause','ended'].forEach(ev=>{
    player.addEventListener(ev, ()=>{
      if(!currentBtn) return;
      if(ev==='pause' || ev==='ended'){ setLabel(currentBtn,false); stop(); }
      else { setLabel(currentBtn,!player.paused); }
    });
  });

  // ---- data → rows ---------------------------------------------------------
  const res  = await fetch(CARDS_JSON, {cache:'no-store'});
  const data = await res.json();  // [{ep,title,logline,quote,audio,video,transcript,thumb}, ...]
  data.sort((a,b)=>(a.ep||'').localeCompare(b.ep||''));

  // build exactly 6 rows (pad if fewer)
  const rows = Array.from({length:6}, (_,i)=> data[i] || {ep:`S01E0${i+1}`});
  const cell = (html)=>`<div class="ss-cell">${html}</div>`;
  const stub = '—';

  table.insertAdjacentHTML('beforeend',
    rows.map(c=>{
      const ep = (c.ep||'').trim();
      const title = c.title || '';
      const log = c.logline || '';
      const quote = c.quote ? `\u201C${c.quote}\u201D` : '';
      const audio = c.audio || '';
      const video = c.video || '';
      const cardUrl = `/TheSassenachStudies/cards/${ep}.html`;
      const thumb = (c.thumb && c.thumb.trim()) ? c.thumb.trim() : `/TheSassenachStudies/thumbs/${ep}.jpg`;

      // AUDIO CELL
      const audioCell = audio ? `
        <div class="ss-top"><span class="ss-ep">${ep}</span><h3 class="ss-title">Audio</h3></div>
        <button class="ss-btn" data-audio="${audio}" aria-pressed="false">▶ Play</button>
        <div class="ss-meta"><div class="ss-links">
          <a href="${audio}">Download</a>
          <a href="${cardUrl}">Card</a>
        </div></div>` : stub;

      // VIDEO CELL
      const videoCell = video ? `
        <div class="ss-top"><span class="ss-ep">${ep}</span><h3 class="ss-title">Video</h3></div>
        <a class="ss-chip" href="${video}">
          <span class="dot">▶</span><span>Open video</span>
        </a>
        <div class="ss-meta"><div class="ss-links">
          <a href="${video}">Direct link</a>
          <a href="${cardUrl}">Card</a>
        </div></div>` : stub;

      // SUMMARY CELL
      const sumCell = `
        <div class="ss-top"><span class="ss-ep">${ep}</span><h3 class="ss-title">${title||'Summary'}</h3></div>
        <img class="ss-thumb" src="${thumb}" alt="" onerror="this.remove()">
        ${log ? `<p class="ss-log">${log}</p>` : ``}
        ${quote ? `<blockquote class="ss-quote">${quote}</blockquote>` : ``}
        <div class="ss-meta"><div class="ss-links">
          ${c.transcript ? `<a href="${c.transcript}">Post/Transcript</a>` : `<a href="${cardUrl}">Card</a>`}
        </div></div>`;

      return cell(audioCell) + cell(videoCell) + cell(sumCell);
    }).join('')
  );
})();
</script>

</script>
<script>
(function(){
  const hero  = document.getElementById('seasonHero');
  const img   = document.getElementById('heroImg');
  const title = document.getElementById('heroTitle');
  const blurb = document.getElementById('heroBlurb');

  // Your poster lives at repo root as "season1_poster.jpg"
  img.src = '/TheSassenachStudies/season1_poster.jpg';
  img.onload = ()=> { hero.hidden = false; };

  // Optional: tweak copy here if you want
  title.textContent = 'Season 1 — Bloodlines & Timelines';
  blurb.textContent = 'A six-part, Outlander-themed analytical series on spiral (connection) and red thread (commitment).';
})();
</script>

  <!-- Sticky footer mini-player (audio) -->
  <div id="sticky" class="sticky" hidden>
    <img id="sThumb" alt="" src="" />
    <div class="s-meta">
      <div class="s-title" id="sTitle">Now playing…</div>
      <div class="s-sub" id="sSub"></div>
      <a id="sLink" href="#" target="_blank" rel="noopener">Read on Listed ↗</a>
    </div>
    <audio id="sAudio" class="s-audio" controls preload="metadata"></audio>
    <button id="sClose" class="s-close" aria-label="Close player">Close ✕</button>
  </div>
  <script>
    // Sticky player close & ESC handling
    (function(){
      const bar = document.getElementById('sticky');
      const btn = document.getElementById('sClose');
      const audio = document.getElementById('sAudio');
      if(btn){ btn.addEventListener('click', ()=>{ audio.pause(); bar.hidden = true; }); }
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !bar.hidden){ audio.pause(); bar.hidden = true; } });
    })();
  </script>
</body>
</html>

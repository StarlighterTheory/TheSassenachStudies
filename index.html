<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Sassenach Studies — Media Library</title>
<meta name="description" content="Audio & video library for The Sassenach Studies — Bloodlines & Timelines (Season 1)." />
<link rel="preconnect" href="https://archive.org" />
<style>
  /* =============================
     The Sassenach Studies — parchment & ink skin
     Single‑file GitHub Pages site
     ============================= */
  :root{
    /* Watercolor/ink palette to match your artwork */
    --ink: #2a2a2a;
    --ink-2: #3a3a3a;
    --parchment: #f3ecd8;
    --parchment-2:#efe6cf;
    --stone:#6c7a86;
    --fern:#6c8a6b;
    --heather:#8b6f9d;
    --thread:#c64a3a; /* red thread */
    --sky:#4a6b8a;    /* spiral blue */
    --accent:#274C56; /* deep teal */
  }
  html,body{height:100%}
  body{
    margin:0; font:16px/1.5 "Georgia", ui-serif, Cambria, "Times New Roman", serif; color:var(--ink);
    background: radial-gradient(1200px 800px at 10% 0%, rgba(255,255,255,.8), rgba(255,255,255,0)) , var(--parchment);
  }
  .wrap{max-width:clamp(960px, 90vw, 1320px); margin:0 auto; padding:28px 24px 72px}
  header{display:grid; grid-template-columns:1fr auto; gap:16px; align-items:center; margin-bottom:22px}
  .brand{display:flex; gap:14px; align-items:center}
  .brand .logo{width:54px; height:54px; border-radius:12px; background: conic-gradient(from 0deg, var(--sky), var(--parchment) 35%, var(--thread) 36%, var(--thread) 64%, var(--parchment) 65%, var(--sky)); box-shadow:0 2px 0 rgba(0,0,0,.05) inset, 0 2px 6px rgba(0,0,0,.15)}
  .brand h1{font-size: clamp(20px, 3vw, 30px); margin:0}
  .brand h1 small{display:block; font-size:.6em; color:var(--stone); letter-spacing:.5px}
  .actions a{display:inline-block; padding:8px 12px; border:2px solid var(--ink); border-radius:10px; text-decoration:none; color:var(--ink); background:linear-gradient(var(--parchment-2), var(--parchment)); box-shadow:0 2px 0 rgba(0,0,0,.08)}
  .actions a:hover{transform:translateY(-1px)}

  .hero{position:relative; border-radius:18px; overflow:hidden; margin:10px 0 22px; border:2px solid rgba(0,0,0,.1); background:var(--parchment-2)}
  .hero img{display:block; width:100%; height:auto}
  .hero .ribbon{position:absolute; left:16px; bottom:16px; background:rgba(255,255,255,.85); border:2px solid rgba(0,0,0,.15); padding:10px 14px; border-radius:10px}
  .hero .ribbon h2{margin:0; font-size:clamp(18px, 2.2vw, 26px)}
  .hero .ribbon p{margin:4px 0 0; font-size:.95rem; color:var(--stone)}

  .filters{display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:18px 0 10px}
  .filters .seg{display:flex; gap:6px; padding:6px; background:var(--parchment-2); border:2px solid rgba(0,0,0,.08); border-radius:12px}
  .filters .seg button{border:0; padding:8px 12px; border-radius:8px; background:transparent; cursor:pointer; font-weight:600}
  .filters .seg button[aria-pressed="true"]{background:var(--ink); color:#fff}
  .filters input[type="search"]{flex:1 1 240px; padding:10px 12px; border-radius:10px; border:2px solid rgba(0,0,0,.12); background:#fff}

  .grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(340px, 1fr)); gap:22px; margin-top:12px}
  .card{background:linear-gradient(#fff, #faf7ee); border:2px solid rgba(0,0,0,.18); border-radius:16px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.10); transition:transform .12s ease, box-shadow .12s ease}
  .thumb{aspect-ratio:16/9; background:#ddd; position:relative}
  .thumb img{width:100%; height:100%; object-fit:cover; display:block}
  .badge{position:absolute; top:10px; left:10px; background:#fff; color:var(--ink); border:2px solid rgba(0,0,0,.12); padding:3px 8px; border-radius:999px; font-size:.8rem; font-weight:700}
  .meta{padding:12px 14px}
  .title{margin:0 0 4px; font-size:1.05rem}
  .small{color:var(--stone); font-size:.92rem}
  .meta .tags{margin-top:8px; display:flex; gap:8px; flex-wrap:wrap}
  .tag{font-size:.8rem; background:rgba(198,74,58,.08); color:var(--thread); border:1px solid rgba(198,74,58,.25); padding:2px 8px; border-radius:999px}
  .row{display:flex; gap:10px; align-items:center; margin-top:10px}
  .btn{border:2px solid var(--ink); background:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700}
  .btn.play{background:var(--ink); color:#fff}
  .btn.alt{border-color:var(--accent); color:var(--accent)}

  dialog#player{width:min(900px, 96vw); border:0; padding:0; border-radius:18px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.35)}
  .player-head{padding:14px 16px; background:var(--parchment-2); border-bottom:2px solid rgba(0,0,0,.1); display:flex; gap:10px; align-items:center; justify-content:space-between}
  .player-body{padding:16px; background:#fff}
  .player-title{margin:0; font-size:1.1rem}
  .close{border:2px solid rgba(0,0,0,.25); background:#fff; border-radius:8px; padding:6px 10px; cursor:pointer}
  .media{width:100%; max-height:60vh}
  footer{margin-top:40px; color:var(--stone); font-size:.92rem}
  footer a{color:var(--ink)}

  /* Tiny nod to Jamie & Claire — silhouette cameo corners */
  .hero:before,.hero:after{content:""; position:absolute; width:60px; height:60px; top:14px; border-radius:50%; opacity:.07; background:radial-gradient(circle at 60% 40%, var(--ink) 0 35%, transparent 37%), conic-gradient(from 0deg, transparent 0 40%, var(--ink) 0 41%, transparent 43% 100%)}
  .hero:before{left:14px}
  .hero:after{right:14px; transform:scaleX(-1)}

  @media (prefers-color-scheme: dark){
    body{color:#f6f2e8; background:#111}
    .actions a{border-color:#eee; color:#111; background:#f6f2e8}
    .card{background:linear-gradient(#1a1a1a,#121212); border-color:rgba(255,255,255,.12)}
    .meta .small{color:#c9c1af}
    .btn{background:#111; color:#f6f2e8; border-color:#f6f2e8}
    .btn.play{background:#f6f2e8; color:#111}
    .hero .ribbon{background:rgba(17,17,17,.85); color:#f6f2e8}
    dialog#player{background:#111}
    .player-body{background:#000}
  }
  /* Sticky footer mini-player */
  .sticky{position:fixed; left:0; right:0; bottom:0; z-index:9999; display:grid; grid-template-columns:auto 1fr auto; gap:12px; align-items:center; padding:10px 14px; border-top:2px solid rgba(0,0,0,.18); background:linear-gradient(var(--parchment-2), var(--parchment)); box-shadow:0 -8px 24px rgba(0,0,0,.12)}
  .sticky[hidden]{display:none}
  .sticky img{width:56px; height:56px; object-fit:cover; border-radius:10px; border:2px solid rgba(0,0,0,.18)}
  .sticky .s-meta{min-width:0}
  .sticky .s-title{font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .sticky .s-sub{font-size:.9rem; color:var(--stone); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .sticky .s-audio{width:min(520px, 50vw)}
  .sticky .s-close{border:2px solid rgba(0,0,0,.25); background:#fff; border-radius:8px; padding:6px 10px; cursor:pointer}
/* ======= Sassenach 3-col media grid ======= */
.ss-grid-wrap{ margin:1.25rem 0; }
.ss-grid{ display:block; border:1px solid var(--ink-2, #3a3a3a20); border-radius:14px; overflow:hidden; }
.ss-row--head{ background:var(--parchment-2); border-bottom:1px solid var(--ink-2, #3a3a3a20); }
.ss-row{ display:grid; grid-template-columns: 1fr 1fr 2fr; gap:0; border-top:1px solid var(--ink-2, #3a3a3a20); }
.ss-cell{ padding:.85rem .9rem; min-height:64px; }

.ss-row--head .ss-cell{
  font-weight:600; color:var(--ink);
  font:600 .9rem/1.2 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

/* Audio play button + links */
.ss-btn{
  appearance:none; border:1px solid var(--ink-2, #3a3a3a30); background:#fff;
  color:var(--ink); font:600 .92rem/1 system-ui, -apple-system, Segoe UI, Roboto, Arial;
  padding:.5rem .7rem; border-radius:10px; cursor:pointer;
}
.ss-btn:hover{ border-color:var(--stone); }
.ss-btn:focus{ outline:2px solid var(--fern); outline-offset:2px; }

.ss-links{ margin-top:.35rem; color:var(--stone); }
.ss-link{ color:inherit; text-decoration:underline; text-underline-offset:2px; }
.ss-link:hover{ text-decoration:none; }
.ss-dot{ margin:0 .35rem; opacity:.7; }

/* Video chip */
.ss-vid{
  display:inline-flex; align-items:center; gap:.5rem;
  border:1px solid var(--ink-2, #3a3a3a20); border-radius:10px; padding:.5rem .7rem;
  text-decoration:none; color:var(--ink); background:#fff;
}
.ss-vid:hover{ border-color:var(--stone); }
.ss-play{ display:inline-grid; place-items:center; width:1.6rem; height:1.6rem;
  border-radius:50%; border:1px solid var(--ink-2, #3a3a3a20); }
.ss-vidtxt{ font-weight:600; }

/* Card column */
.ss-card{ background:#fff; border:1px solid var(--ink-2, #3a3a3a20); border-radius:12px; padding:.8rem .9rem; }
.ss-card-head{ display:flex; align-items:baseline; gap:.55rem; margin:0 0 .25rem 0; }
.ss-ep{ font:600 .78rem/1 system-ui; color:var(--fern); text-transform:uppercase; letter-spacing:.02em; }
.ss-title{ font:600 1.02rem/1.2 ui-serif, Georgia, Cambria, "Times New Roman", Times, serif; color:var(--ink); margin:0; }
.ss-logline{ color:var(--ink-2); margin:.4rem 0 .6rem 0; }
.ss-quote{ margin:.25rem 0 .5rem 0; padding-left:.8rem; border-left:3px solid var(--ink-2, #3a3a3a20); color:var(--stone); font-style:italic; }

/* Dark mode polish */
@media (prefers-color-scheme: dark){
  .ss-grid{ border-color:#2e2e2e; }
  .ss-row--head{ background:#141414; border-bottom-color:#2e2e2e; }
  .ss-row{ border-top-color:#2e2e2e; }
  .ss-cell{ }
  .ss-btn, .ss-vid, .ss-card{ background:#121212; border-color:#2e2e2e; color:#f6f2e8; }
  .ss-links, .ss-logline, .ss-vidtxt{ color:#c9c1af; }
  .ss-quote{ border-left-color:#2e2e2e; color:#a9a39a; }
}

/* Stack on small screens */
@media (max-width:860px){
  .ss-row{ grid-template-columns: 1fr; }
  .ss-row--head{ display:none; }
  .ss-cell{ border-top:1px solid var(--ink-2, #3a3a3a20); }
}
.ss-thumb{
  width:100%;
  height:auto;
  display:block;
  margin:.35rem 0 .6rem;
  border-radius:10px;
  border:1px solid var(--ink-2, #3a3a3a20);
  object-fit:cover;
}
@media (prefers-color-scheme: dark){
  .ss-thumb{ border-color:#2e2e2e; }
}

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>The Sassenach Studies <small>Where fandoms meet footnotes</small></h1>
      </div>
      <div class="actions">
        <a id="toListed" href="https://listed.to/@SassenachStudies" target="_blank" rel="noopener">↗ To blog</a>
      </div>
    </header>

    <!-- Hero poster for Season 1 -->
    <section class="hero" id="seasonHero" hidden>
      <img id="heroImg" alt="Season poster" />
      <div class="ribbon">
        <h2 id="heroTitle">Season 1 — Bloodlines &amp; Timelines</h2>
        <p id="heroBlurb">A six‑part, Outlander‑themed analytical series on spiral (connection) and red thread (commitment).</p>
      </div>
    </section>

    <section class="filters" aria-label="Filters">
      <div class="seg" role="group" aria-label="Media type">
        <button data-filter="all" aria-pressed="true">All</button>
        <button data-filter="audio" aria-pressed="false">Audio</button>
        <button data-filter="video" aria-pressed="false">Video</button>
      </div>
      <input id="q" type="search" placeholder="Search title, notes, tags…" aria-label="Search" />
    </section>

    <!-- New 3-column media grid -->
<div class="ss-grid-wrap">
  <div class="ss-grid" id="ss-media-grid" role="table" aria-label="Episodes media grid">
    <div class="ss-head" role="rowgroup">
      <div class="ss-row ss-row--head" role="row">
        <div class="ss-cell ss-col-a" role="columnheader">Audio</div>
        <div class="ss-cell ss-col-v" role="columnheader">Video</div>
        <div class="ss-cell ss-col-c" role="columnheader">Summary</div>
      </div>
    </div>
    <div class="ss-body" id="ss-media-body" role="rowgroup"></div>
  </div>
</div>

<!-- One shared audio element for Play buttons -->
<audio id="ss-audio" preload="none" aria-hidden="true"></audio>

    <footer>
      <p>Files stream from <strong>archive.org</strong> (direct links). This page is a static, privacy‑friendly player hosted on <strong>GitHub Pages</strong>.</p>
    </footer>
  </div>

  <dialog id="player">
    <div class="player-head">
      <h3 class="player-title" id="playerTitle">Playing…</h3>
      <button class="close" onclick="player.close()">Close ✕</button>
    </div>
    <div class="player-body" id="playerBody"></div>
  </dialog>
<script>
(async function(){
  // Your Pages site lives under /TheSassenachStudies
  const CARDS_JSON = '/TheSassenachStudies/cards/cards.json';

  const USE_FALLBACKS = false; // keep placeholders empty

  const $body = document.getElementById('ss-media-body');
  const $player = document.getElementById('ss-audio');
  let currentBtn = null, rafId = null, lastKnownSrc = "";

  function fmt(t){ if(!isFinite(t)||t<0) t=0; const m=Math.floor(t/60), s=Math.floor(t%60); return `${m}:${s.toString().padStart(2,'0')}`; }
  function setLabel(btn, playing){
    const cur = isFinite($player.currentTime) ? fmt($player.currentTime) : '0:00';
    const dur = (isFinite($player.duration) && $player.duration>0) ? fmt($player.duration) : '—:—';
    const time = ` ${cur} / ${dur}`;
    btn.innerHTML = playing ? `❚❚ Pause${time}` : '▶ Play';
    btn.setAttribute('aria-pressed', playing ? 'true' : 'false');
  }
  function startTicker(){ stopTicker(); const tick=()=>{ if(currentBtn && !$player.paused) setLabel(currentBtn,true); rafId=requestAnimationFrame(tick); }; rafId=requestAnimationFrame(tick); }
  function stopTicker(){ if(rafId) cancelAnimationFrame(rafId); rafId=null; }

  document.addEventListener('click', async (ev)=>{
    const btn = ev.target.closest('.ss-btn'); if(!btn) return;
    const src = btn.dataset.audio; if(!src) return;
    if (lastKnownSrc === new URL(src, location.href).href) {
      if ($player.paused) { try{ await $player.play(); }catch{} currentBtn=btn; setLabel(btn,true); startTicker(); }
      else { $player.pause(); setLabel(btn,false); stopTicker(); }
      return;
    }
    $player.src = src; lastKnownSrc = $player.src;
    try{ await $player.play(); }catch{}
    if (currentBtn && currentBtn!==btn) setLabel(currentBtn,false);
    currentBtn = btn; setLabel(currentBtn,true); startTicker();
  });

  $player.addEventListener('loadedmetadata', ()=>{ if(currentBtn) setLabel(currentBtn,!$player.paused); });
  $player.addEventListener('durationchange', ()=>{ if(currentBtn) setLabel(currentBtn,!$player.paused); });
  $player.addEventListener('timeupdate', ()=>{ if(currentBtn && !$player.paused) setLabel(currentBtn,true); });
  $player.addEventListener('play', ()=>{ if(currentBtn){ setLabel(currentBtn,true); startTicker(); } });
  $player.addEventListener('pause', ()=>{ if(currentBtn) setLabel(currentBtn,false); stopTicker(); });
  $player.addEventListener('ended', ()=>{ if(currentBtn) setLabel(currentBtn,false); stopTicker(); });

  try{
    const res = await fetch(CARDS_JSON, {cache:'no-store'});
    const list = await res.json();
    list.sort((a,b)=> (a.ep||'').localeCompare(b.ep||''));

   $body.innerHTML = list.map(c => {
  const ep = (c.ep || '').trim();

  const audio = c.audio || (USE_FALLBACKS ? `/media/${ep}.mp3` : "");
  const video = c.video || (USE_FALLBACKS ? `/media/${ep}.mp4` : "");

  // prefer c.thumb; else guess /thumbs/S01EXX.jpg
  const thumb = (c.thumb && c.thumb.trim())
    ? c.thumb.trim()
    : `/TheSassenachStudies/thumbs/${ep}.jpg`;

  const cardUrl = `/TheSassenachStudies/cards/${ep}.html`;

  const links = [
    audio ? `<a class="ss-link" href="${audio}">Audio</a>` : "",
    c.transcript ? `<a class="ss-link" href="${c.transcript}">Transcript</a>` : "",
    `<a class="ss-link" href="${cardUrl}">Card</a>`
  ].filter(Boolean).join(`<span class="ss-dot">·</span>`);

  return `
    <div class="ss-row" role="row" aria-label="${ep} row">
      <!-- Audio -->
      <div class="ss-cell ss-col-a" role="cell">
        ${audio ? `
          <button class="ss-btn" data-audio="${audio}" aria-label="Play ${ep} audio" aria-pressed="false">▶ Play</button>
          <div class="ss-links">${links}</div>
        ` : ``}
      </div>

      <!-- Video -->
      <div class="ss-cell ss-col-v" role="cell">
        ${video ? `
          <a class="ss-vid" href="${video}" aria-label="${ep} video">
            <span class="ss-play" aria-hidden="true">▶</span>
            <span class="ss-vidtxt">${ep} — Video</span>
          </a>
        ` : ``}
      </div>

      <!-- Summary -->
      <div class="ss-cell ss-col-c" role="cell">
        <article class="ss-card" aria-labelledby="${ep}-h">
          <header class="ss-card-head">
            <span class="ss-ep">${ep}</span>
            <h3 id="${ep}-h" class="ss-title">${c.title || ''}</h3>
          </header>
          ${thumb ? `<img class="ss-thumb" src="${thumb}" alt="" onerror="this.remove()">` : ``}
          ${c.logline ? `<p class="ss-logline">${c.logline}</p>` : ``}
          ${c.quote ? `<blockquote class="ss-quote">“${c.quote}”</blockquote>` : ``}
          <p class="ss-links">${links}</p>
        </article>
      </div>
    </div>`;
}).join('');
  }catch(e){
    $body.innerHTML = `<div class="ss-row"><div class="ss-cell" role="cell">
      <p>Couldn’t load episode cards. Make sure <code>${CARDS_JSON}</code> is published.</p>
    </div></div>`;
  }
})();
</script>
<script>
(function(){
  const hero  = document.getElementById('seasonHero');
  const img   = document.getElementById('heroImg');
  const title = document.getElementById('heroTitle');
  const blurb = document.getElementById('heroBlurb');

  // Your poster lives at repo root as "season1_poster.jpg"
  img.src = '/TheSassenachStudies/season1_poster.jpg';
  img.onload = ()=> { hero.hidden = false; };

  // Optional: tweak copy here if you want
  title.textContent = 'Season 1 — Bloodlines & Timelines';
  blurb.textContent = 'A six-part, Outlander-themed analytical series on spiral (connection) and red thread (commitment).';
})();
</script>

  <!-- Sticky footer mini-player (audio) -->
  <div id="sticky" class="sticky" hidden>
    <img id="sThumb" alt="" src="" />
    <div class="s-meta">
      <div class="s-title" id="sTitle">Now playing…</div>
      <div class="s-sub" id="sSub"></div>
      <a id="sLink" href="#" target="_blank" rel="noopener">Read on Listed ↗</a>
    </div>
    <audio id="sAudio" class="s-audio" controls preload="metadata"></audio>
    <button id="sClose" class="s-close" aria-label="Close player">Close ✕</button>
  </div>
  <script>
    // Sticky player close & ESC handling
    (function(){
      const bar = document.getElementById('sticky');
      const btn = document.getElementById('sClose');
      const audio = document.getElementById('sAudio');
      if(btn){ btn.addEventListener('click', ()=>{ audio.pause(); bar.hidden = true; }); }
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !bar.hidden){ audio.pause(); bar.hidden = true; } });
    })();
  </script>
</body>
</html>
